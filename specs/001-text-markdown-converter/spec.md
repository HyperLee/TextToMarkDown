# Feature Specification: 文字轉 Markdown 格式工具網站

**Feature Branch**: `001-text-markdown-converter`  
**Created**: 2026-02-13  
**Status**: Draft  
**Input**: User description: "我想開發一個工具網站, 這個網站能夠將文字檔轉換成 markdown 格式, 以便於在 GitHub 上使用。資料來源可能為網頁複製、Office 檔案複製或純文字檔案，支持自動識別格式並進行適當轉換。"

## User Scenarios & Testing *(mandatory)*

### User Story 1 - 純文字貼上並轉換為 Markdown (Priority: P1)

使用者開啟工具網站後，將從任意來源複製的純文字內容貼到輸入區域，點擊「轉換」按鈕，系統自動辨識文字中的結構（如標題、列表、段落），並在輸出區域呈現轉換後的 Markdown 格式文本。

**Why this priority**: 這是整個工具的核心功能。沒有文字轉換能力，其他功能都無意義。此功能提供最基本的使用價值，讓使用者能夠快速將非結構化文字轉為 Markdown。

**Independent Test**: 可直接在網站上貼入含標題、列表、段落的純文字，點擊轉換按鈕，驗證輸出是否為正確的 Markdown 格式。

**Acceptance Scenarios**:

1. **Given** 使用者已開啟工具網站, **When** 在輸入區域貼入含有多段落的純文字並點擊「轉換」, **Then** 輸出區域忠實保留原始段落結構，不自行推測標題層級
2. **Given** 使用者已開啟工具網站, **When** 在輸入區域貼入含有項目符號列表的文字並點擊「轉換」, **Then** 輸出區域顯示對應的 Markdown 無序列表（`-` 或 `*`）或有序列表（`1.`）
3. **Given** 使用者已開啟工具網站, **When** 在輸入區域貼入含有多段落的文字並點擊「轉換」, **Then** 各段落間以空行分隔，保持原有的段落結構

---

### User Story 2 - 複製轉換後的 Markdown 到剪貼簿 (Priority: P1)

使用者完成文字轉換後，點擊「複製」按鈕，即可將輸出區域中的 Markdown 文本複製到系統剪貼簿，以便貼到 GitHub、編輯器或其他工具中使用。

**Why this priority**: 複製功能是使用者取得轉換結果的主要途徑，與核心轉換功能同等重要，缺少此功能將大幅降低使用體驗。

**Independent Test**: 完成轉換後點擊「複製」按鈕，再貼到任意文字編輯器中，驗證內容是否與輸出區域一致。

**Acceptance Scenarios**:

1. **Given** 輸出區域已顯示轉換後的 Markdown 文本, **When** 使用者點擊「複製」按鈕, **Then** Markdown 文本被複製到系統剪貼簿，且顯示複製成功的提示訊息
2. **Given** 輸出區域為空（尚未進行轉換）, **When** 使用者點擊「複製」按鈕, **Then** 按鈕不執行動作或顯示提示告知無可複製內容

---

### User Story 3 - 將含格式的網頁或 Office 內容轉換為 Markdown (Priority: P2)

使用者從網頁或 Office 文件（Word、Excel、PowerPoint）複製帶有樣式格式（粗體、斜體、超連結、表格等）的內容，貼到輸入區域，系統能夠辨識 HTML 格式的富文本，並轉換為對應的 Markdown 語法。

**Why this priority**: 富文本（HTML）格式的自動辨識與轉換是進階功能，大幅提升工具的實用性，但核心的純文字轉換已能提供基礎價值。

**Independent Test**: 從網頁或 Word 文件複製一段含有粗體、超連結、表格的內容，貼到輸入區域後轉換，驗證 Markdown 輸出是否正確保留這些格式元素。

**Acceptance Scenarios**:

1. **Given** 使用者從網頁複製含有粗體與斜體的段落, **When** 貼入輸入區域並點擊「轉換」, **Then** 輸出區域顯示 `**粗體**` 與 `*斜體*` 語法
2. **Given** 使用者從網頁複製含有超連結的文字, **When** 貼入並轉換, **Then** 輸出區域顯示 `[連結文字](URL)` 格式
3. **Given** 使用者從 Excel 或網頁複製表格資料, **When** 貼入並轉換, **Then** 輸出區域顯示 Markdown 表格語法（含 `|` 分隔符和標題列分隔線）
4. **Given** 使用者從 Word 複製含有圖片的內容, **When** 貼入並轉換, **Then** 圖片以 `![alt text](image_url)` 佔位符語法呈現，並提示使用者需另行處理圖片資源

---

### User Story 4 - Mermaid 圖表語法轉換 (Priority: P3)

使用者貼入的文字中包含可辨識的流程圖或圖表描述（如以文字描述的流程步驟），系統能將其轉換為 Mermaid 圖表的 Markdown 程式碼區塊格式。

**Why this priority**: Mermaid 圖表轉換是一個特殊的增值功能，適用較狹窄的使用場景，在核心功能穩定後再實現。

**Independent Test**: 貼入一段含有 Mermaid 語法或流程圖描述的文字，驗證輸出是否包裹在 ` ```mermaid ` 程式碼區塊中。

**Acceptance Scenarios**:

1. **Given** 使用者貼入含有 Mermaid 語法的文字區塊, **When** 點擊「轉換」, **Then** 該區塊被包裹在 ` ```mermaid ` 和 ` ``` ` 標記中，保持原始 Mermaid 語法不變
2. **Given** 使用者貼入的文字中不包含任何 Mermaid 相關內容, **When** 點擊「轉換」, **Then** 系統正常進行一般文字轉換，不產生任何 Mermaid 程式碼區塊

---

### User Story 5 - 多語言文字轉換支持 (Priority: P2)

使用者貼入含有中文、英文或其他語言混合的文字內容，系統能正確處理各種語言字元，轉換過程中不會產生亂碼或遺失字元。

**Why this priority**: 國際化支持是基本的品質要求，使用者很可能會處理中英文混合的文件內容。

**Independent Test**: 貼入一段中英文混合、包含特殊字元（如日文、韓文、表情符號）的文字，驗證轉換後內容完整無亂碼。

**Acceptance Scenarios**:

1. **Given** 使用者貼入一段中英文混合的文字, **When** 點擊「轉換」, **Then** 所有中文與英文字元均正確保留，Markdown 格式正確
2. **Given** 使用者貼入含有特殊 Unicode 字元（如表情符號、日韓文字）的文字, **When** 點擊「轉換」, **Then** 特殊字元不遺失、不出現亂碼

---

### Edge Cases

- 使用者未輸入任何文字就點擊「轉換」按鈕時，系統應顯示友善提示訊息而非產生錯誤
- 使用者貼入超大量文字（超過 100,000 字元）時，系統應提示文字過長或進行適當的效能處理
- 使用者貼入純 HTML 標記語法（如 `<div><p>text</p></div>`）時，系統應能辨識並轉換為對應 Markdown
- 使用者貼入已經是 Markdown 格式的文字時，系統應保持原樣不做重複轉換
- 使用者於行動裝置瀏覽器上使用時，介面應仍可正常操作
- 轉換結果中包含特殊的 Markdown 字元（如 `*`、`_`、`#`、`[`）作為一般文字使用時，應正確跳脫（escape）

## Requirements *(mandatory)*

### Functional Requirements

- **FR-001**: 系統 MUST 提供一個 textarea 文字輸入區域，讓使用者可以貼入或輸入待轉換的文字；textarea 顯示純文字，但透過 paste 事件攚截剪貼簿中的 HTML 格式資料以支援富文本轉換
- **FR-002**: 系統 MUST 提供一個「轉換」按鈕，點擊後將輸入區域的文字轉換為 Markdown 格式
- **FR-003**: 系統 MUST 提供一個輸出區域，以原始 Markdown 語法文字形式顯示轉換結果（非渲染預覽），方便使用者直接複製使用
- **FR-004**: 系統 MUST 提供「複製到剪貼簿」功能，讓使用者一鍵複製轉換結果
- **FR-005**: 系統 MUST 能夠從 HTML 富文本輸入中辨識標題標籤（H1 ~ H6）並轉換為對應的 Markdown 標題語法；對於純文字輸入，系統不進行標題推測，僅保留段落結構
- **FR-006**: 系統 MUST 能夠辨識並轉換有序列表與無序列表為對應的 Markdown 列表語法
- **FR-007**: 系統 MUST 能夠辨識並轉換超連結為 `[text](url)` 格式
- **FR-008**: 系統 MUST 能夠辨識並轉換圖片為 `![alt](src)` 格式
- **FR-009**: 系統 MUST 能夠辨識並轉換粗體、斜體等文字樣式為對應的 Markdown 語法
- **FR-010**: 系統 MUST 能夠辨識並轉換表格為 Markdown 表格語法
- **FR-011**: 系統 MUST 能夠辨識 Mermaid 圖表語法區塊，並以 ` ```mermaid ` 程式碼區塊包裹
- **FR-012**: 系統 MUST 能夠辨識程式碼區塊，並以 ` ``` ` 程式碼區塊語法包裹
- **FR-013**: 系統 MUST 正確處理中文、英文及其他 Unicode 語言的字元，不產生亂碼
- **FR-014**: 系統 MUST 在使用者未輸入內容就點擊轉換時，顯示友善的提示訊息
- **FR-015**: 系統 MUST 提供簡潔明瞭的網頁介面，包含輸入區域、轉換按鈕、輸出區域、複製按鈕
- **FR-016**: 系統 MUST 在使用者貼上內容時自動偵測剪貼簿中是否包含 HTML 格式（`text/html`）；若有則優先使用 HTML 進行富文本轉換，若無則退回純文字（`text/plain`）處理，此過程對使用者完全透明
- **FR-017**: 系統 MUST 在轉換過程中盡量保持原有的文本結構與格式
- **FR-018**: 系統 MUST 僅支持單次轉換操作，不提供批量轉換功能

### Key Entities

- **輸入文本（Input Text）**: 使用者貼入的原始文字內容，可為純文字、HTML 富文本或混合格式。屬性：文字內容、偵測到的格式類型（純文字 / HTML）
- **轉換結果（Conversion Result）**: 經過轉換引擎處理後產生的 Markdown 格式文本。屬性：Markdown 文字內容、轉換狀態（成功 / 失敗）
- **格式元素（Format Element）**: 在輸入文本中辨識出的格式單元，如標題、列表、連結、圖片、表格、程式碼區塊、Mermaid 圖表等。屬性：元素類型、原始內容、轉換後的 Markdown 表示

## Clarifications

### Session 2026-02-13

- Q: 輸出區域的顯示方式為何（原始語法 / 渲染預覽 / 雙欄並排）？ → A: 僅顯示 Markdown 原始語法文字，方便直接複製使用
- Q: 轉換處理應在客戶端還是伺服端執行？ → A: 全部在客戶端（瀏覽器 JavaScript）處理，伺服器僅提供靜態頁面
- Q: 純文字中「標題」的辨識策略為何？ → A: 純文字不做標題推測，僅保留段落結構；標題辨識僅針對 HTML 富文本來源
- Q: 輸入區域的貼上行為如何偵測富文本格式？ → A: 自動偵測：貼上時若剪貼簿含 HTML 格式則優先使用，否則退回純文字處理
- Q: 輸入區域的 UI 互動模式為何？ → A: 使用 textarea 顯示純文字，透過 paste 事件攚截 HTML 資料進行轉換

## Assumptions

- 使用者的瀏覽器支持現代 Web 標準（剪貼簿 API 等）
- 從 Office 文件複製的內容在瀏覽器剪貼簿中會以 HTML 格式呈現，系統可透過此 HTML 進行富文本轉換
- 圖片資源無法透過純文字傳輸，系統僅能產生圖片語法佔位符，使用者需自行管理圖片檔案
- 單次轉換的文字量在合理範圍內（10 萬字元以下），超過此範圍系統應給予提示
- 系統不需要使用者登入或帳號管理功能
- 系統不需要儲存使用者的轉換歷史記錄
- 轉換完全在客戶端瀏覽器（JavaScript）即時處理，伺服器僅負責提供頁面，不參與轉換運算；使用者資料不離開瀏覽器，確保隱私安全

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: 使用者從開啟網站到完成一次文字轉換並複製結果，整個流程可在 30 秒內完成
- **SC-002**: 對於包含標題、列表、連結、粗體/斜體的標準格式文字，轉換準確率達 95% 以上
- **SC-003**: 90% 的首次使用者無需額外說明即可成功完成一次轉換操作
- **SC-004**: 網站在行動裝置上（手機、平板）可正常使用，介面不產生排版錯亂
- **SC-005**: 對於 10,000 字元以內的文字，轉換結果在 3 秒內完成顯示
- **SC-006**: 支持至少 5 種語言的文字（中文、英文、日文、韓文、表情符號）轉換，無亂碼問題
- **SC-007**: 富文本（HTML 格式）與純文字的自動偵測準確率達 90% 以上
